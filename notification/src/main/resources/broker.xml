<?xml version="1.0" encoding="UTF-8"?>
<!--
  Artemis broker configuration for HMDM MQTT notifications.
  This embedded broker is used when mqtt.external is not set.
-->
<configuration xmlns="urn:activemq" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
               xsi:schemaLocation="urn:activemq /schema/artemis-configuration.xsd">
   <core xmlns="urn:activemq:core">
      <!-- Non-persistent for embedded use -->
      <persistence-enabled>false</persistence-enabled>
      
      <!-- Disable JMX -->
      <jmx-management-enabled>false</jmx-management-enabled>
      
      <!-- MQTT acceptor - port configured programmatically -->
      <acceptors>
         <acceptor name="mqtt">tcp://0.0.0.0:${mqtt.port:1883}?protocols=MQTT</acceptor>
      </acceptors>
      
      <!-- Security will be configured programmatically if mqtt.auth is enabled -->
      <security-enabled>false</security-enabled>
      
      <!-- Address settings for MQTT topics -->
      <address-settings>
         <address-setting match="#">
            <auto-create-addresses>true</auto-create-addresses>
            <auto-create-queues>true</auto-create-queues>
            <default-address-routing-type>MULTICAST</default-address-routing-type>
         </address-setting>
      </address-settings>
   </core>
</configuration>
